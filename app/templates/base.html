{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;600;700&family=Lobster&family=Pacifico&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0"
    />
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    {% block styles %} {% endblock %}

    <title>{% block titulo %} {% endblock %}</title>
  </head>
  <body>
    <header>
      <a class="menu-icon" href=""
        ><span class="material-symbols-outlined">menu</span></a
      >
      <a class="title-app-1" href="{% url 'home' %}"> <h1>Mazamorrapp</h1></a>
      <div id="find" class="find">
        <form action="" method="get" class="busqueda">
          <input
            class="campo-texto"
            type="text"
            placeholder="Buscar productos..."
            name="search"
          />
          <button class="btn-buscar">
            <span class="material-symbols-outlined icons">search</span>
          </button>
        </form>
      </div>
      <a class="ingreso" href="{% url 'login' %}">
        <span class="material-symbols-outlined icons">person</span>
        {% if request.user.is_authenticated %}
          
          <span class="tag-ingreso">{{request.user.username}}</span>
        {% else %}  
          <span class="tag-ingreso">ingreso</span>
        {% endif %}
      </a>
      <a class="carrito"  onclick="manejarMenuCarrito()" ><span class="material-symbols-outlined icons">shopping_cart </span></a
      >
    </header>

    {% block body %} {% endblock %}

    <div id="menu-carrito" class="carrito-compras">
      <div class="header-carrito-compras">
        <span class="title">Tu carrito</span>
        <div onclick="manejarMenuCarrito()" class="contenedor-logo-carrito">
          <span  class="material-symbols-outlined close ">close</span>
        </div>
      </div>
      <div class="container-content">
        <div class="content-menu-lateral">
          
          {% if request.session.carrito.items %} 
  
          {% for key,value in request.session.carrito.items %}
            <div class="section">
              <div class="info-producto">
                <div class="image">
                  <img src="{{ value.imagen }}" alt="">
                </div>
                <div class="datos">
                  <div class="nombre">
                    <span>{{ value.nombre }}</span>
                  </div>
                  <div class="precio">
                    <span>${{ value.acumulado }}</span>
                  </div>
                </div>
              </div>
              <div class="acciones">
                <div class="accions-add-remove">
                  {% if value.cantidad == 1 %}
                  <a href="{% url 'eliminarCarrito' key %}"><span class="material-symbols-outlined">delete</span></a>
                  {% else%}
                    <a href="{% url 'eliminarUnidadCarrito' key %}"><span class="material-symbols-outlined">remove</span></a>
                  {% endif%}
                </div>
                <label class="unidades">{{value.cantidad}}U</label>
                <div class="accions-add-remove">
                  <a href="{% url 'agregarAlCarrito' key %}"><span class="material-symbols-outlined">add</span></a>
                </div>
              </div>
            </div>
            
          {% endfor%} 
          <div class="section-subtotal">
            <div class="section-subtotal-content">
              <a href="{% url 'limpiar'  %}"><span class="material-symbols-outlined">delete</span></a>
              {% if request.user.is_authenticated %}
              <a class="pagar-enlace" href="{% url 'compra'  %}">
                <div class="pagar">
                  <span class="pagar-label">Ir a pagar</span>
                  <label class="pagar-subtotal">$ {{ request.session.subTotal }}</label>
                </div>
              </a>
              {% else %}
                <a class="pagar-enlace" href="{% url 'compra'  %}">
                  <div class="pagar">
                    <span class="pagar-label">Ir a pagar</span>
                    <label class="pagar-subtotal">$ {{ request.session.subTotal }}</label>
                  </div>
                </a>
              {% endif %}
              
            </div>
          </div>
          {% else %}
          <div class="aviso">
            <span class="aviso-texto">Aún no tienes productos en tu carrito de compras</span>
            <div class="contenedor-logo-carrito">
              <span class="material-symbols-outlined agregarProductosL"> add_shopping_cart </span>
            </div>
            <button class="seguir-comprando">seguir comprando</button>
          </div>
          {% endif%}
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-content">
        <div class="footer-top-content">
          <div class="footer-top-content-vertical-group">
            <h2 class="title-app-2">Mazamorrapp</h2>
            <span class="sub-title-app">© 2022 Mazamorrapp</span>
          </div>
          <div class="footer-top-content-vertical-group">
            <ul class="link">
              <a class="title-list" href="">Acerca de Mazamorrapp</a>
              <li><a href="">Ciudades</a></li>
              <li><a href="">Contacto</a></li>
              <li><a href="">Términos de servicio</a></li>
              <li><a href="">Privacidad</a></li>
              <li><a href="">Tiendas</a></li>
            </ul>
          </div>
          <div class="footer-top-content-vertical-group">
            <ul class="link">
              <a class="title-list" href="">Social media</a>
              <li><a href="">Twitter</a></li>
              <li><a href="">Instagram</a></li>
              <li><a href="">Facebook</a></li>
              <li><a href="">Blog</a></li>
              <li><a href="">Recursos de Prensa</a></li>
            </ul>
          </div>
          <div class="footer-top-content-vertical-group">
            <div class="linkATienda">
              <img src="{% static "images/tiendas.png" %}" alt="">
            </div>
          </div>
        </div>
      </div>
    </footer>
    <script src="{% static "scripts/base.js" %}"></script>
  </body>
</html>
